# GNU & UNIXコマンド(主題103)

## 1 コマンドライン操作
- bashシェルにおいてスーパーユーザのプロンプトの末尾に表示される記号 ```#```
- 一般ユーザのプロンプトの末尾に表示される記号 ```$```
- Linuxのデフォルトのログインシェル ```bash```
### メタキャラクタ
- シェルによって特別に解釈される文字
- 任意の一文字 ```?```
### 環境変数
- コマンド実行履歴を保存するファイル名を格納する ```HISTFILE```
- ログインしているユーザ名を格納 ```USER```
- コマンド履歴補zんファイルに記録が残らないようにする ```HISTFILESIZE=0```
### man
- sambaというキーワードを一部に含むmanページを検索 ```man -k samba```
- passwdというキーワードと完全に一致した名前を含むmanページを検索 ```man -f passwd```
#### セクション
1. ユーザコマンド
2. システムコール
3. ライブラリ
4. デバイスファイル
5. 設定ファイル
6. ゲーム
7. その他
8. システム管理コマンド
9. Linux独自のカーネル用ドキュメント
### apropos
- sambaというキーワードを一部に含むmanページを検索 ```aprops samba```
### set
- 全てのシェル変数と環境変数を表示
### env
- 全ての環境変数を表示
### printenv
- 一部、または全ての環境変数を表示
### dd
- ファイルからデバイス、デバイスからファイル、デバイス間のファイルのコピーを実行
### cd
- 現在ログインしているユーザはtestである。testユーザのホームディレクトリに移動するコマンド ```cd``` ```cd ~``` ```cd ~test```
### makewhatis
- whatisデータベースを作成するコマンド
### whatis
- キーワードで全てのマニュアルを観世ニッチで検索 ```whatis crontab```
### uname
- 現在使用しているシステムの情報を表示 ```uname```

## 2 フィルタを使ったテキストストリームの処理
- Windowsの改行コード ```CRLF```
- Linuxの改行コード ```LF```
### wc
- ファイルの文字数のみを表示 ```wc -c file```
### grep
- ファイルから行頭が # ではない行を抽出 ```grep -v '^#' file```
- ファイルからpingまたはhogeという文字列を抽出 ```grep -E 'ping|hoge' file```
- ファイルから.*という文字列を含む行を抽出する ```grep -F '.*' file```
### tr
- 英数字を表す文字クラス ```tr -d [:alnum:] < file```
- catを併用し、ファイル内の英小文字を英大文字に変換して表示 ```cat file | tr -s [:lower:] [:upper:]]```
- 数字を表す文字クラス ```tr -d [:digit:] < file`
### sed
- ファイル内の全てのaをAに、bをBに置換 ```sed y/ab/AB file```
- ファイル内の全てのpingという文字列をhogeに置換し、また行頭が#の行を削除して表示 ```sed -e s/ping/hoge/g -e /^#/d text```
- ファイルに含まれているpingという文字列をhogeに置換 ```sed s/ping/hoge/g file```
- ファイルの1行目から3行目を削除して表示 ```sed 1,3d file```
- ファイルの行頭が#の行を削除して表示 ```sed /^#/d text```
### cut
- テキストファイルの各行から指定したフィールドを取り出して表示する ```cut -c 1 file```
- ファイルの各行の2番目の文字を取り出す ```cut -c 2 file```
### sort
- デフォルトでは、昇順にソート
- ファイルを照準にソートし、行頭の空白は無視 ```sort -b file```
- ファイルの2番目のフィールドを基準に数値として昇順にソートする。区切り文字は、, ```sort -k 2 -t , file```
### expand
- タブをスペースに変換する
### unexpand
- 行頭にある連続したスペースをタブに変換するコマンド
- ファイルにあるスペース1つ分(行頭以外にあるスペースも含む)をタブに置き換えて表示 ```unexpand -t 1 file``` ```unexpand -a -t 1 file```
### fmt
- 1行あたりの最大文字数を指定してテキストを整形する ```fmt -w 5 file```
### uniq
- ファイルにある重複行のみ表示 ```uniq -d file```
### cat
- ファイルの内容を標準出力 ```cat file```
- リダイレクト演算子2つを使用してファイルの内容を既存のhogeファイルに追記 ```cat < file >> hoge```
### tail
- ファイルの末尾500バイトを表示 ```tail -c 500 file```

## 3 基本的なファイル管理の実行
### mv
- 移動先ディレクトリに同盟のファイルやディレクトリがある場合、上書きするかどうか確認する ```mv -i```
### touch
- アクセス時刻と修正時刻を指定した時刻に変更する ```touch -t 201701142120 lpic1/3.md```
- 修正時刻を変更 ```touch -m 201701142300 file```
### tar
- gzip形式で圧縮したアーカイブファイルをカレントディレクトリに展開 ```tar fxz file.tar.gz```
- file.tarというアーカイブを展開する ```tar fx file.tar```
- カレントディレクトリにあるworkdirをxzで圧縮されたtarアーカイブにする ```tar cfJ foo.tar.xz workdir```
- アーカイブを展開せず、詳細情報を表示 ```tar ftv dir.tar```
### gzip
- ディレクトリ内全てのファイルをそれぞれgzip形式で圧縮 ```gzip -r dir```
### ls
- inode番号を表示 ```ls -i```
- 隠しファイルも含めて全て表示 ```ls -a```
### rmdir
- カレントディレクトリ内にあるdirディレクトリとその子ディレクトリのdir/dir2を削除 ```rmdir -p dir/dir2```
### mkdir
- ホームディレクトリに\workディレクトリを作成 ```mkdir ~/\\work```
### rm
- 削除するかどうか確認する ```rm -i file```

## 4 ストリーム、パイプ、リダイレクトの使用
### tee
- dmesgコマンドの標準出力をディスプレイに表示すると共にlogファイルに保存 ```dmesg | tee log```
### 2>&1
- コマンドの標準エラー出力を標準出力にリダイレクトするリダイレクト演算子

## 5 プロセスの生成、監視、終了
- ファアグラウンドで実行しているプロセスに割り込みシグナルを送信し、プロセスを終了 ```Ctrl+c```
### シグナル
- プロセスに送られるメッセージ
- ```kill```コマンドでシグナルを指定する際は、シグナル名でもシグナル名に```SIG```を付けても構わない
    - ```kill -TERM 560```
    - ```kill -SIGTERM 560```
1. ハングアップ、プロセスを再起動するシグナル名 ```HUP```
    - デーモンプログラムの設定変更を実施した際に設定ファイルを再読込した場合など
2. 割り込みに寄って動作を停止させる、キーワードからの割り込み(Ctrl + C) ```INT```
9. プロセスを直ちに強制終了 ```KILL```
15. 終了(デフォルト) ```TERM```
18. 停止しているプロセスを再開 ```CONT```
19. プロセスを一時停止する ```STOP``` ```TSTP```
### pstree
- 動作中のプロセスの親子関係をツリー状に表示できるコマンド
### ps
- プロセスの実行ユーザ名も表示 ```ps u```
- 動作中の全てのプロセスの親子関係をツリー状で表示 ```ps afx```
- 動作中おプロセスの親子関係をツリー状で表示 ```ps f```
- プロセスIDが10のプロセスのみ情報を表示 ```ps p 10```
### top
- システムの稼働時間や負荷平均、メモリやスワップ領域の使用状況、プロセスの稼働状況を一定時間ごとに更新して表示するコマンド
### uptime
- システムの稼働時間や負荷エイキン、プロセスの稼働状況を表示するコマンド
### free
- メモリやスワップ領域の仕様状況を表示
### pgrep
- 実行中の全てのbashプロセスのプロセスIDを表示 ```pgrep bash```
### bzip2
- file.bz2ファイルを展開 ```bzip2 -d file.bz2```
### bunzip2
- file.bz2ファイルを展開 ```bunzip2 file.bz2```

## 6 プロセスの実行優先度の変更

## 7 正規表現を使用したテキストファイルの検索

## 8 viを使った基本的なファイル編集の実行
- コマンドモードにおいて、カーソルの目にバッファの内容を貼り付ける ```P```
- ファイル内容を保存せずに編集を終了 ```:q!```
- コマンドモードから入力モードに移行する際、カーソルにある行の下に空白行を挿入し、その行で文字を入力 ```o```
- 編集を終了することなくカレントディレクトリにあるファイルを確認 ```:!ls```
- 行番号を非表示にする ```:set nonu``` ```:set nonumber```
- コマンドモードから入力モードに移行する際、カーソルにある行の末尾から文字を入力 ```A```
- コマンドモードにおいてカーソルイチの左の文字を削除する ```X```
- コマンドモードから入力モードに移行する際、カーソルの行の先頭から文字を入力 ```I```
- 編集を終了せず、ファイルを最後に保存した状態に戻す ```:e!```
- pingという文字列を全てhogeに置換する ```:%s/ping/hoge/g```
- コマンドモードでカーソルを画面の最上行へ移動 ```H```
